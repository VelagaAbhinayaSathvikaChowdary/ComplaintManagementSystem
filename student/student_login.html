<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Student Authentication</title>
  <link rel="stylesheet" href="student.css">
</head>
<body>

<div class="auth-center-wrapper">
  <div class="auth-card">

    <!-- Tabs -->
    <div class="auth-tabs">
      <button class="tab active" onclick="showLogin()">Login</button>
      <button class="tab" onclick="showRegister()">Register</button>
    </div>

    <!-- LOGIN -->
    <div id="loginForm" class="form-box">
      <h2>Student Login</h2>

      <input type="text" id="loginUser" placeholder="Student ID">
      <input type="password" id="loginPass" placeholder="Password">

      <button class="primary-btn" onclick="login()">Login</button>
      <p class="error-text" id="loginError"></p>
    </div>

    <!-- REGISTER -->
    <div id="registerForm" class="form-box hidden">
      <h2>Student Registration</h2>

      <input type="text" id="regUser" placeholder="Student ID">
      <input type="password" id="regPass" placeholder="Password">
      <input type="text" id="regName" placeholder="Full Name">

      <button class="primary-btn" onclick="register()">Register</button>
      <p class="success-text" id="registerMsg"></p>
    </div>

  </div>
</div>

<script>
function showLogin() {
  loginForm.classList.remove("hidden");
  registerForm.classList.add("hidden");
  document.querySelectorAll(".tab")[0].classList.add("active");
  document.querySelectorAll(".tab")[1].classList.remove("active");
}

function showRegister() {
  registerForm.classList.remove("hidden");
  loginForm.classList.add("hidden");
  document.querySelectorAll(".tab")[1].classList.add("active");
  document.querySelectorAll(".tab")[0].classList.remove("active");
}

function register() {
  const user = regUser.value.trim();
  const pass = regPass.value.trim();
  const name = regName.value.trim();

  if (!user || !pass || !name) {
    registerMsg.textContent = "All fields are required";
    return;
  }

  localStorage.setItem("studentUser", user);
  localStorage.setItem("studentPass", pass);
  localStorage.setItem("studentName", name);

  registerMsg.textContent = "Registration successful. Please login.";
  regUser.value = "";
  regPass.value = "";
  regName.value = "";
}

function login() {
  const storedUser = localStorage.getItem("studentUser");
  const storedPass = localStorage.getItem("studentPass");
  const storedName = localStorage.getItem("studentName");

  const user = loginUser.value.trim();
  const pass = loginPass.value.trim();

  if (!storedUser || !storedPass) {
    loginError.textContent = "No user registered. Please register first.";
    return;
  }

  if (user === storedUser && pass === storedPass) {
    // Store current student info for session
    sessionStorage.setItem("currentStudent", storedName);
    sessionStorage.setItem("currentStudentId", storedUser);
    window.location.href = "student_dashboard.html";
  } else {
    loginError.textContent = "Invalid student ID or password.";
  }
}
</script>

</body>
</html>
